<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Session 설명</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="session_style.css" />
  </head>

  <body>
    <header>
      <nav class="navbar">
        <div class="logo">세션 개념 설명</div>
        <ul class="nav-links">
          <li><a href="#what">세션이란?</a></li>
          <li><a href="#how">작동 원리</a></li>
          <li><a href="#code">코드 예시</a></li>
          <li><a href="#security">보안 이슈</a></li>
          <li><a href="index.html">홈</a></li>
        </ul>
      </nav>
    </header>

    <section class="hero">
      <h1>세션(Session) 이해하기</h1>
      <p>웹 서비스에서의 사용자 상태 유지 메커니즘을 상세하게 알아보자</p>
      <button onclick="scrollToSection('what')">시작하기</button>
    </section>

    <section id="what" class="content-section">
      <h2>세션(Session)이란?</h2>
      <p>
        세션은
        <span class="highlight">HTTP가 상태 비저장(stateless) 프로토콜</span
        >이기 때문에, 사용자의 로그인 상태나 장바구니 정보와 같은 상태를
        유지하기 위해 사용됩니다. 세션은 서버에 저장되며, 클라이언트는
        일반적으로 <strong>세션 ID</strong>만을 쿠키로 보관합니다.
      </p>
    </section>

    <section id="how" class="content-section">
      <h2>세션 작동 원리</h2>
      <ol>
        <li>클라이언트가 로그인 정보를 서버에 전송합니다.</li>
        <li>
          서버는 사용자 인증이 완료되면 고유한 <strong>세션 ID</strong>를
          생성합니다.
        </li>
        <li>
          세션 ID와 함께 서버에 사용자 정보를 저장합니다 (예: 메모리, DB).
        </li>
        <li>
          세션 ID는 <span class="highlight">Set-Cookie</span> 헤더를 통해
          브라우저에 전달됩니다.
        </li>
        <li>클라이언트는 이후 모든 요청에 이 세션 ID를 자동으로 포함합니다.</li>
        <li>서버는 해당 ID를 바탕으로 사용자 상태를 확인합니다.</li>
      </ol>
    </section>

    <section id="code" class="content-section">
      <h2>세션 처리 코드 예시 (Express.js)</h2>
      <div class="code-box">
        const express = require('express');<br />
        const session = require('express-session');<br />
        const app = express();<br /><br />

        app.use(session({<br />
        secret: 'mySecretKey',<br />
        resave: false,<br />
        saveUninitialized: true,<br />
        cookie: { secure: false }<br />
        }));<br /><br />

        app.get('/', (req, res) => {<br />
        if (req.session.views) {<br />
        req.session.views++<br />
        res.send(`Views: ${req.session.views}`);<br />
        } else {<br />
        req.session.views = 1;<br />
        res.send('첫 방문입니다.');<br />
        }<br />
        });
      </div>
    </section>

    <section id="security" class="content-section">
      <h2>세션 관련 보안 이슈</h2>
      <ul>
        <li>
          <strong>세션 하이재킹(Session Hijacking):</strong> 공격자가
          <span class="highlight">세션 ID를 탈취</span>하여 사용자로 가장
        </li>
        <li>
          <strong>세션 고정(Session Fixation):</strong> 세션 ID를 미리 할당하여
          피해자에게 사용하게 함
        </li>
        <li>
          <strong>보안 대책:</strong>
          <ul>
            <li>HTTPS 사용으로 세션 ID 탈취 방지</li>
            <li>로그인 시 세션 ID 재생성</li>
            <li>HttpOnly, Secure 속성 사용</li>
            <li>짧은 세션 유효 시간 설정</li>
          </ul>
        </li>
      </ul>
    </section>

    <footer>
      <p>&copy; 2025 웹프로그래밍 2조.</p>
    </footer>

    <script>
      function scrollToSection(id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      }
    </script>
  </body>
</html>
